= モジュールモデルの学習
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:keywords: mule, sdk, モジュール, 拡張, コンポーネント, 構造

Mule モジュールの構築は、`@Extension` アノテーション付きのクラスから開始します。このクラスは、すべてのモジュール機能と、機能に関連するすべての要素をエクスポートするために使用します。

[WARNING]
このクラスは、公開された非抽象クラスである​*必要があります*。`@Extension` アノテーションは、インターフェイス、抽象クラス、公開/保護クラス、または型付きクラス (汎用型) では使用できません。

[source,java,linenums]
----
@Extension(name = "basic")
public class BasicModule {
}
----

`@Extension` アノテーションを使用する場合は、モジュールにわかりやすく簡潔な名前を付ける必要があります。モジュール名に、`extension`、`module`、または `connector` は使用できません。これらの文字列を含めても、SDK によって削除されます。必要に応じて、モジュールの `vendor` と `category` を指定できます (<<license#,「ライセンス」>>参照)。

空のモジュールを作成したら、モジュールに要素を追加できます。

.基本のモジュール構造
image::model.png[モジュールの基本モデル図]

概要レベルでは以下の要素があります。

[[components]]
* <<Components>>
** <<operations#, 操作>>
** <<sources#, ソース>>
** <<functions#, 関数>>
** <<routers#, ルータ>>
** <<scopes#, スコープ>>
* <<connections#, 接続プロバイダ>>
* <<configs#, 設定>>
* <<parameters#, パラメータ>>

== コンポーネント

コンポーネントは、モジュール機能の鍵となります。モジュールは、与えられたパラメータセットに基づいて実行され、フローでメッセージを生成または変更します。

モジュールの最も一般的なコンポーネントはソースと操作です。

* <<operations#, 操作>>は、受信したメッセージを処理して結果を生成するコンポーネントです。
* <<sources#, ソース>>は、Mule Runtime が処理するメッセージを受信するか、新しいメッセージを生成するコンポーネントです。

== 設定

設定は、モジュールの動作に影響する設定可能なパラメータのセットです。 <<sources#, >>通常、<<sources#,ソース>>と<<operations#,操作>>は、動作を決定する設定のパラメータに依存します。ただし、一部は設定なしでも機能します。

モジュールの設定を宣言するための要件はなく、いくつでも必要なだけ宣言できます。設定が異なればパラメータセットも異なり、その設定を使用した場合にしか使用できない<<operations#,操作>>や <<sources#,ソース>>を指定する場合もあります。

== 接続プロバイダ

<<connections#,接続プロバイダ>>は、<<configs#,設定>>から作成される接続の処理を担当する Module 要素です。ロジックとパラメータ化処理を一元管理して、特定種別の接続のプロビジョニングおよびリリースを行います。

<<configs#,設定>>、<<sources#,ソース>>、および<<operations#,操作>>と同じように、接続プロバイダを実行するためには、通常は接続に依存します。接続は必須ではありませんが、普通は使用されます。<<operations#,操作>>と<<sources#,ソース>>で使用する接続は、<<connections#,接続プロバイダ>>が提供します。

<<connections#, 接続プロバイダ>>は<<configs#,設定>>にバインドされています。 <<configs#, 設定>>には、<<connections#,接続プロバイダ>>が 1 つも定義されないか、1 つだけ定義されるか、あるいは異なる種別の接続を作成する複数の接続プロバイダが定義される場合があります。たとえば、HTTPS 接続と (非セキュア) HTTP 接続用に別々の `ConnectionProvider` が定義されます。

== パラメータ

パラメータは、モジュールモデルの最も細かい要素であり、<<operations#,操作>>、<<sources#,ソース>>、<<configs#,設定>>、および<<connections#,接続プロバイダ>>のすべての要素で使用されます。

パラメータは、実行する要素の値を受け入れる設定可能な要素を表すか、または設定された値を保持します。

== 他の要素

モジュールには、その他にも <<routers#,ルータ>>、<<scopes#,スコープ>>、<<functions#,関数>>、<<errors#,エラー>>などの要素があります。ここで説明した要素は、ほとんどのモジュールで使用するコア要素です。
